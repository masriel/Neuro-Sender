# Neuro Sender

Neuro Sender - это приложение на языке Python, которое использует библиотеку Pyrogram и языковую модель OpenAI для отправки и обработки сообщений на платформе Telegram. Оно обеспечивает беспроблемную коммуникацию и включает интеграцию с базой данных для хранения и обновления истории сообщений.

## Предварительные требования

Перед запуском Neuro Sender убедитесь, что у вас есть следующие предварительные требования:

- Установлен Python 3.6 или выше на вашей системе.
- Запущенный локально сервер базы данных PostgreSQL или доступный через сетевое соединение.
- Установлены Python-пакеты Pyrogram, psycopg2, langchain, openai и python-dotenv.

## Установка

1. Клонируйте репозиторий Neuro Sender с [GitHub](https://github.com/masriel/Neuro-Sender) или загрузите исходный код.
2. Создайте виртуальное окружение (опционально, но рекомендуется) и активируйте его.
3. Установите необходимые Python-пакеты, выполнив следующую команду:

   ```
   pip install -r requirements.txt
   ```

4. Измените файл `config.env` в корневой директории проекта и установите необходимые переменные окружения:

   ```
   API_ID=ваш_api_id
   API_HASH=ваш_api_hash
   USER_ID=ваш_userid
   OPENAI_API_KEY=ваш_ключ_openai_api
   ```

5. Настройте базу данных PostgreSQL, указав соответствующие параметры подключения в функции `connection`.

## Использование

Для использования Neuro Sender выполните следующие шаги:

1. Запустите приложение, выполнив следующую команду:

   ```
   python neuro_sender.py
   ```

2. Neuro Sender подключится к платформе мессенджера, используя предоставленные учетные данные API, и начнет прослушивать сообщения.

3. При получении сообщения Neuro Sender будет обрабатывать его в соответствии с определенными обработчиками:

   - Обработчик команды `/start` отвечает приветственным сообщением.
   - Сообщения, начинающиеся с `!`, обрабатываются функцией `handle_start` и передаются в функцию `send_message` для отправки заданным получателям.
   - Все остальные сообщения обрабатываются функцией `handle_new_message`. Имя пользователя, содержимое сообщения и история беседы обновляются в базе данных.

4. Чтобы отправить сообщение, начните его с `!`, а затем укажите текст, который хотите отправить. 
   
   Например, отправка `!Привет!` отправит сообщение "Привет!" заданным получателям, указанным в функции `send_message`.

## Интеграция с базой данных

Neuro Sender использует базу данных PostgreSQL для хранения и обновления истории сообщений. Функция `add_info` добавляет новую информацию в базу данных, а функция `update_info` обновляет существующую информацию. Параметры подключения к базе данных можно настроить в функции `connection`.
